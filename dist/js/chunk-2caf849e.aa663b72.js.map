{"version":3,"sources":["webpack:///./src/views/Detail.vue?b7ef","webpack:///./src/views/Detail.vue?7978","webpack:///src/views/Detail.vue","webpack:///./src/views/Detail.vue?73e2","webpack:///./src/views/Detail.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Detail_vue_vue_type_style_index_0_id_959c1b0e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Detail_vue_vue_type_style_index_0_id_959c1b0e_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","to","tag","_v","src","api","detailData","img_url","alt","_s","title","price","domProps","innerHTML","content","on","click","onSub","directives","name","rawName","value","expression","type","disabled","input","$event","target","composing","num","onAdd","onAddCart","staticRenderFns","Detailvue_type_script_lang_js_","data","config","methods","requestData","id","_this","$axios","get","then","res","console","log","result","catch","err","_this2","post","uid","storage","product_id","_id","success","$router","push","path","$socket","emit","mounted","$route","query","views_Detailvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"js/chunk-2caf849e.aa663b72.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=959c1b0e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=style&index=0&id=959c1b0e&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"detail\"},[_c('router-link',{staticClass:\"back_button\",attrs:{\"to\":\"/home\",\"tag\":\"div\"}},[_vm._v(\"返回\")]),_c('div',{staticClass:\"detail_header\"},[_c('img',{attrs:{\"src\":_vm.api+_vm.detailData.img_url,\"alt\":\"\"}}),_c('h2',{staticClass:\"name\"},[_vm._v(_vm._s(_vm.detailData.title))]),_c('p',{staticClass:\"price\"},[_vm._v(\"￥\"+_vm._s(_vm.detailData.price)+\"/份\")])]),_c('div',{staticClass:\"detail_content\"},[_c('h3',{staticClass:\"content_title\"},[_vm._v(\"商品详情\")]),_c('img',{attrs:{\"src\":_vm.api+_vm.detailData.img_url,\"alt\":\"\"}}),_c('p',{staticClass:\"content_introduce\",domProps:{\"innerHTML\":_vm._s(_vm.detailData.content)}})]),_c('div',{staticClass:\"detail_footer\"},[_c('div',{staticClass:\"footer_amount\"},[_c('span',[_vm._v(\"数量:\")]),_c('div',{staticClass:\"amount_controler\"},[_c('div',{staticClass:\"controler_inner\"},[_c('div',{staticClass:\"sub\",on:{\"click\":_vm.onSub}},[_vm._v(\"-\")]),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.num),expression:\"num\"}],staticClass:\"amount\",attrs:{\"type\":\"number\",\"disabled\":\"disabled\"},domProps:{\"value\":(_vm.num)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.num=$event.target.value}}}),_c('div',{staticClass:\"add\",on:{\"click\":_vm.onAdd}},[_vm._v(\"+\")])])])]),_c('div',{staticClass:\"footer_into_cart\",on:{\"click\":_vm.onAddCart}},[_vm._v(\"加入购物车\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"detail\">\r\n        <router-link to=\"/home\" tag=\"div\" class=\"back_button\">返回</router-link>\r\n\r\n        <div class=\"detail_header\">\r\n            <img :src=\"api+detailData.img_url\" alt />\r\n            <h2 class=\"name\">{{detailData.title}}</h2>\r\n            <p class=\"price\">￥{{detailData.price}}/份</p>\r\n        </div>\r\n\r\n        <div class=\"detail_content\">\r\n            <h3 class=\"content_title\">商品详情</h3>\r\n            <img :src=\"api+detailData.img_url\" alt />\r\n            <p class=\"content_introduce\" v-html=\"detailData.content\"></p>\r\n        </div>\r\n\r\n        <div class=\"detail_footer\">\r\n            <div class=\"footer_amount\">\r\n                <!-- 这里可能用ui库代替 先自己做练习 -->\r\n                <span>数量:</span>\r\n                <div class=\"amount_controler\">\r\n                    <div class=\"controler_inner\">\r\n                        <div class=\"sub\" @click=\"onSub\">-</div>\r\n                        <input class=\"amount\" type=\"number\" v-model=\"num\" disabled=\"disabled\">\r\n                        <div class=\"add\" @click=\"onAdd\">+</div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class=\"footer_into_cart\"\r\n                @click=\"onAddCart\">加入购物车</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Config from '../models/config.js'\r\nimport Stroage from '../models/storage.js'\r\nexport default {\r\n    name:'detail',\r\n    data(){\r\n        return {\r\n            api: Config.api,\r\n            detailData: {},\r\n            num: 1\r\n        }\r\n    },\r\n    methods: {\r\n        requestData(id){    //向后台请求数据\r\n            this.$axios.get(this.api+'api/productcontent?id='+id)\r\n            .then((res) => {\r\n                console.log(res)\r\n                this.detailData = res.data.result[0]\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n        },\r\n        onSub(){\r\n            if(this.num > 1){\r\n                --this.num\r\n            }\r\n        },\r\n        onAdd(){\r\n            ++this.num\r\n        },\r\n        onAddCart(){    //点击添加至购物车\r\n            this.$axios.post(this.api+'api/addcart',{\r\n                uid: Stroage.get('uid'),    //扫描二维码获取暂时写死\r\n                title: this.detailData.title,\r\n                product_id: this.detailData._id,\r\n                img_url: this.detailData.img_url,\r\n                price: this.detailData.price,\r\n                num: this.num\r\n                // open_id: 'fjalkejkljwlkjflwkjf'\r\n            })\r\n            .then((res) => {\r\n                if(res.data.success === 'true'){\r\n                    this.$router.push({path: '/home'})\r\n                }\r\n                console.log(res)\r\n                this.$socket.emit('addcart', 'I want to refresh')\r\n\r\n            })\r\n            .catch((err) => {\r\n                console.log(err)\r\n            })\r\n        }\r\n\r\n    },\r\n    mounted(){\r\n        this.requestData(this.$route.query.id)\r\n    }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.back_button {\r\n    position: fixed;\r\n    top: 1.5rem;\r\n    left: 1.5rem;\r\n    width: 5rem;\r\n    height: 5rem;\r\n    background: #000000bb;\r\n    border-radius: 50%;\r\n    color: #ffffff;\r\n    line-height: 5rem;\r\n    text-align: center;\r\n    box-sizing: border-box;\r\n    padding-left: 0.6rem;\r\n    &::before {\r\n        content: \"\";\r\n        display: block;\r\n        border-bottom: #ffffff solid 0.2rem;\r\n        border-left: #ffffff solid 0.2rem;\r\n        position: absolute;\r\n        width: 0.8rem;\r\n        height: 0.8rem;\r\n        top: 2rem;\r\n        left: 0.8rem;\r\n        transform: rotate(45deg);\r\n    }\r\n}\r\n\r\n.detail_header {\r\n    width: 95%;\r\n    margin: 0 auto;\r\n    background: #ffffff;\r\n    margin-bottom: 1rem;\r\n    img {\r\n        width: 100%;\r\n        height: 18rem;\r\n    }\r\n    .name {\r\n        margin-left: 0.5rem;\r\n    }\r\n    .price {\r\n        color: red;\r\n    }\r\n}\r\n\r\n.detail_content {\r\n    background: #ffffff;\r\n    width: 95%;\r\n    margin: 0 auto;\r\n    padding: 1rem 0 10rem 0;\r\n    img {\r\n        width: 95%;\r\n        margin: 0 auto;\r\n        display: block;\r\n    }\r\n    .content_title {\r\n        margin-left: 2.5%;\r\n    }\r\n    .content_introduce {\r\n        width: 95%;\r\n        margin: 0 auto;\r\n    }\r\n}\r\n\r\n.detail_footer {\r\n    position: fixed;\r\n    left: 0;\r\n    bottom: 0;\r\n    width: 100%;\r\n    height: 4.4rem;\r\n    font-size: 1.6rem;\r\n    background: #ffffff;\r\n    line-height: 4.4rem;\r\n    border-top: #eeeeee solid 1px;\r\n    .footer_amount {\r\n        position: absolute;\r\n        left: 2rem;\r\n        top: 0;\r\n        width: 18rem;\r\n       \r\n        .amount_controler {\r\n            display: inline-block;\r\n            .controler_inner {\r\n                display: flex;\r\n                width: 9rem;\r\n                text-align: center;\r\n                .sub,\r\n                .amount,\r\n                .add {\r\n                    flex: 1;\r\n                    width: 3rem;\r\n                    height: 3rem;\r\n                    line-height: 3rem;\r\n                    border: solid #eeeeee 1px;\r\n                    display: block;\r\n                    text-align: center;\r\n                    background: #ffffff;\r\n                }\r\n                .sub,\r\n                .add {\r\n                    color: red;\r\n                    font-size: 2rem;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    .footer_into_cart {\r\n        position: absolute;\r\n        right: 2rem;\r\n        top: 0.5rem;\r\n        height: 3rem;\r\n        line-height: 3rem;\r\n        background: #ff0000;\r\n        border-radius: 0.5rem;\r\n        color: #ffffff;\r\n        font-size: 1.2rem;\r\n        padding: 0 0.5rem;\r\n    }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Detail.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Detail.vue?vue&type=template&id=959c1b0e&scoped=true&\"\nimport script from \"./Detail.vue?vue&type=script&lang=js&\"\nexport * from \"./Detail.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Detail.vue?vue&type=style&index=0&id=959c1b0e&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"959c1b0e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}